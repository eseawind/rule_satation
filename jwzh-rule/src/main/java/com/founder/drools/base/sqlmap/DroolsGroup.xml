<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="DroolsGroup">
	
	<typeAlias alias="droolsGroup" type="com.founder.drools.base.model.DroolsGroup" />
	<!-- 查询单条（根据主键） -->
	<!-- <select id="queryById" parameterClass="String" resultClass="ywxtcyryxxb">
		<![CDATA[ select * from YWXT_CYRYXXB t where ID = #id#  and rownum = 1 ]]>
	</select> -->
	

	<!-- 新增 -->
	<insert id="save" parameterClass="droolsGroup">
		<![CDATA[ insert into drools_group (ID,GROUPNAME,CREATETIME,UPDATETIME,SERVICEID) ]]>
		<![CDATA[ values (#id#,#groupname#,#createtime#,#updatetime#,#serviceid#)]]>
	</insert>
	
	<!-- 更新 -->
	<update id="update" parameterClass="droolsGroup">
		<![CDATA[ update drools_group ]]>	
		<dynamic prepend="set">
			<isNotNull prepend="," property="id"><![CDATA[ ID=#id# ]]></isNotNull>
			<isNotNull prepend="," property="groupname"><![CDATA[ GROUPNAME=#groupname# ]]></isNotNull>
			<isNotNull prepend="," property="createtime"><![CDATA[ CREATETIME=#createtime# ]]></isNotNull>
			<isNotNull prepend="," property="updatetime"><![CDATA[ UPDATETIME=#updatetime# ]]></isNotNull>
			<isNotNull prepend="," property="serviceid"><![CDATA[ SERVICEID=#serviceid# ]]></isNotNull>
		</dynamic>
		<![CDATA[ where ID = #id#]]>	
	</update>
	
	<!-- 注销 -->
	<!-- <update id="delete" parameterClass="droolsGroup">
		<![CDATA[ update YWXT_CYRYXXB set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update> -->
	
	<!-- 列表查询 -->
	<select id="query" parameterClass="map" resultClass="droolsGroup">
		SELECT * FROM (
			SELECT rownum r, m.* FROM (
				SELECT * FROM drools_group
				<isNotNull property="entity"> WHERE </isNotNull>
				<isNotEmpty prepend="and" property="entity.id"><![CDATA[ ID=#entity.id# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.groupname"><![CDATA[ GROUPNAME=#entity.groupname# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.createtime"><![CDATA[ CREATETIME=#entity.createtime# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.updatetime"><![CDATA[ UPDATETIME=#entity.updatetime# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.serviceid"><![CDATA[ SERVICEID=#entity.serviceid# ]]></isNotEmpty>
		<![CDATA[ORDER BY $sort$ $order$ ) m]]>
		<![CDATA[	WHERE rownum <= #end#]]>
		<![CDATA[ ) WHERE r > #begin# ]]> 
	</select>
	<select id="queryCount" parameterClass="map" resultClass="Integer">
		SELECT count(1) FROM (
			SELECT rownum r, m.* FROM (
				SELECT * FROM drools_group
				<isNotNull property="entity"> WHERE </isNotNull>
				<isNotEmpty prepend="and" property="entity.id"><![CDATA[ ID=#entity.id# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.groupname"><![CDATA[ GROUPNAME=#entity.groupname# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.createtime"><![CDATA[ CREATETIME=#entity.createtime# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.updatetime"><![CDATA[ UPDATETIME=#entity.updatetime# ]]></isNotEmpty>
				<isNotEmpty prepend="and" property="entity.serviceid"><![CDATA[ SERVICEID=#entity.serviceid# ]]></isNotEmpty>
		<![CDATA[ORDER BY $sort$ $order$ ) m]]>
		<![CDATA[	WHERE rownum <= #end#]]>
		<![CDATA[ ) WHERE r > #begin# ]]>  
	</select>
	
</sqlMap>